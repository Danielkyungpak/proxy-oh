<!DOCTYPE html>
<html ng-app="ProxyOh">

<script src="scripts/jquery-3.2.1.js"></script>

<script src="scripts/angular.js"></script>
<script src="node_modules/angular-masonry/angular-masonry.js"></script>
<script src="scripts/angular-ui/ui-bootstrap.js"></script>
<script src="scripts/angular-ui/ui-bootstrap-tpls.min.js"></script>
<script src="scripts/ng-app/ng-app.js"></script>
<script src="scripts/controllers/main.controller.js"></script>
<script src="scripts/services/card-service.js"></script>
<script src="scripts/services/modal-service.js"></script>

<script src="node_modules/jquery-bridget/jquery-bridget.js"></script>
<script src="node_modules/ev-emitter/ev-emitter.js"></script>
<script src="node_modules/desandro-matches-selector/matches-selector.js"></script>
<script src="node_modules/fizzy-ui-utils/utils.js"></script>
<script src="node_modules/get-size/get-size.js"></script>
<script src="node_modules/outlayer/item.js"></script>
<script src="node_modules/outlayer/outlayer.js"></script>
<script src="node_modules/imagesloaded/imagesloaded.js"></script>
<script src="node_modules/masonry-layout/masonry.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"
    integrity="sha384-NaWTHo/8YCBYJ59830LTz/P4aQZK1sS0SneOgAvhsIl3zBu8r9RevNg5lHCHAuQ/"
    crossorigin="anonymous"></script>

<script src="node_modules/fuse.js/dist/fuse.js"></script>
<script src="scripts/directives/limit-to-between.directive.js"></script>

<script src="node_modules/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
<script src="scripts/components/modal/modal.component.js"></script>
<script src="scripts/components/modal/modal.controller.js"></script>


<head>
    <link rel="shortcut icon" href="#" />
    <link rel="stylesheet" type="text/css" href="content/style.css">
    <link rel="stylesheet" type="text/css" href="content/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="content/ui-bootstrap-csp.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="node_modules/lightbox2/dist/css/lightbox.css" rel="stylesheet" />
</head>

<body ng-controller="MainController as mc" ng-cloak style="overflow-x:hidden">

    <div class="overlay" ng-if="mc.loading">
        <div class="lds-ring">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>

    <div class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a href="" class="navbar-brand">Proxy-Oh</a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="container-fluid" style="padding-left:100px; padding-right:100px;">
            <div class="page-header" id="banner" style="margin-top:80px;">
                <div class="col-md-6 col-xl-6 col-sm-6">
                    <h1>Import Card List</h1>
                    <textarea class="form-control" rows="10" ng-model="mc.importString"
                        placeholder="3x Dark Magician&#013; &#010;3x Time Wizard&#013; &#010;3x Baby Dragon&#013; &#010;1x Thousand Dragon&#013; &#010;2x Blue-Eyes White Dragon"></textarea>
                    <div class="clearfix"></div>
                    <br />
                    <div class="pull-right">
                        <button class="btn btn-info btn-sm" ng-click="mc.parseCardList()">Parse Card List</button>
                    </div>
                </div>

                <div class="col-md-6 col-sm-6 col-xl-6">
                    <h1>Search for a card...</h1>

                    <input type="text" ng-model="mc.value"
                        uib-typeahead="card.name for card in mc.filterFuzzy($viewValue) | limitTo:8"
                        class="form-control" typeahead-on-select="mc.addCardToQueue($item, $model, $label)" />
                    <div class="clearfix"></div>
                    <br /> <br /><br /> <br /><br /> <br /><br /><br /><br /><br />
                    <div class="pull-right">
                        <button class="btn btn-info btn-sm" ng-click="mc.tableView = !mc.tableView"
                            ng-class="{'active': mc.tableView}">Toggle List
                            View</button>
                        <button class="btn btn-danger btn-sm" ng-click="mc.deleteAll()"
                            ng-disabled="mc.queue.length == 0">Remove All Cards</button>

                        <button class="btn btn-success btn-sm" ng-click="mc.createPDF()"
                            ng-disabled="mc.queue.length == 0">Export <span class="badge">{{mc.getCounts()}}</span>
                            Cards To Pdf</button>
                        <!-- <button ng-click="mc.writeFirebaseExample()">Firebase Post</button>
                        <button ng-click="mc.readFirebaseExample()">Firebase Get</button> -->
                    </div>
                    <br /> <br /> <br />
                </div>
            </div>

            <div class="col-md-12 text-center" ng-if="mc.notFoundCards.length > 0">
                <hr />
                <br /><br />
                <h2 class="text-danger">Resolve Conflicts</h2>

                <div ng-repeat="card in mc.notFoundCards">
                    <strong>{{card.name}}</strong><br />

                    <p ng-repeat="result in card.results | limitTo:8 "><a href=""
                            ng-click="mc.resolveConflict(result, card)">{{result.name}}?</a></p>
                    <p ><a href="" ng-click="mc.removeNotFoundCard(card)">None of the above</a></p>
                    <hr class="dark-line" ng-if="!$last" />
                </div>
                <br /><br />

            </div>
            <div class="col-md-2 col-xs-3 card-container" ng-repeat="card in mc.queue" ng-show="!mc.tableView">
                <div class="">
                    <button type="button" class="x-button" tabindex="-1" ng-click="mc.removeCard(card)">&#10006</button>
                </div>

                <div class="card-img-container">
                    <a ng-href="{{card.card_images[0].image_url}}" data-lightbox="{{card.name}}card">
                        <img ng-src="{{card.card_images[0].image_url}}" />
                    </a>
                </div>

                <div class="input-group" style="margin-top: 5px;">
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-number" data-type="minus"
                            ng-click="mc.reduceQuantity(card)">
                            <span>&#8212</span>
                        </button>
                    </span>
                    <input type="number" style="text-align:center;" class="form-control input-number" min="1" max="3"
                        limit-to-between ng-model="card.quantity">
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-number" data-type="plus"
                            ng-click="mc.increaseQuantity(card)">
                            <span>&#65291</span>
                        </button>
                    </span>
                </div>
                <br /> <br />
            </div>
            <div class="col-md-12" ng-show="mc.tableView && mc.queue.length > 0">
                <table class="table table-bordered">
                    <thead style="background:lightgray">
                        <tr>
                            <th style="width:5%"></th>
                            <th style="width:70%">Card Name</th>
                            <th style="width:20%">Quantity</th>
                            <td></td>
                        </tr>
                    </thead>
                    <tbody ng-repeat="card in mc.queue">
                        <tr>
                            <td>
                                <div class="card-img-container">
                                    <a ng-href="{{card.card_images[0].image_url}}" data-lightbox="{{card.name}}table">
                                        <img ng-src="{{card.card_images[0].image_url}}" />
                                    </a>
                                </div>
                            </td>
                            <td><span style="font-size: 20px;">{{card.name}}</span></td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-number" data-type="minus"
                                            ng-click="mc.reduceQuantity(card)">
                                            <span>&#8212</span>
                                        </button>
                                    </span>
                                    <input type="number" style="text-align:center;" class="form-control input-number"
                                        min="1" max="3" limit-to-between ng-model="card.quantity">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-number" data-type="plus"
                                            ng-click="mc.increaseQuantity(card)">
                                            <span>&#65291</span>
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <button class="trash-btn btn" ng-click="mc.removeCard(card)"><i class="fa fa-2x fa-trash"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="clearfix"></div>
            <!-- <div class="col-md-12">
                <div class="pull-right">
                    <button class="btn btn-success" ng-click="">Export To Pdf</button>
                </div>
            </div> -->
            <div class="clearfix"></div>
            <br /> <br /><br />
        </div>
    </div>

</body>

<!-- Firebase -->
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/6.4.0/firebase-app.js"></script>
<!-- <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-auth.js"></script> -->
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
<script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyCov_To39VHCrWHgfwvj9JYdYlP879E4Ck",
        authDomain: "proxy-oh.firebaseapp.com",
        databaseURL: "https://proxy-oh.firebaseio.com",
        projectId: "proxy-oh",
        storageBucket: "",
        messagingSenderId: "799022905848",
        appId: "1:799022905848:web:12562d2b4867fe5f"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
</script>